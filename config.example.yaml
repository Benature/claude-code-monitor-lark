# Claudeç›‘æ§ç³»ç»Ÿé…ç½®æ–‡ä»¶
# æŒ‰åŠŸèƒ½æ¨¡å—åˆ†ç±»ç»„ç»‡ï¼Œç»“æ„æ›´æ¸…æ™°

# APIæ•°æ®æºé…ç½®
api:
  base_url: "http://localhost:8000"     # APIæœåŠ¡å™¨åŸºç¡€URL
  
  # Claudeè´¦æˆ·æ•°æ®API
  claude:
    bearer_token: "your_bearer_token_here"      # Claude APIè®¤è¯ä»¤ç‰Œ
    endpoint: "/admin/claude-accounts"          # Claudeè´¦æˆ·æ•°æ®ç«¯ç‚¹è·¯å¾„
    timeout: 30                                 # è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
    retry_attempts: 3                          # é‡è¯•æ¬¡æ•°
  
  # APIå¯†é’¥ä½¿ç”¨æ•°æ®API  
  usage:
    endpoint: "/admin/api-keys"                 # APIå¯†é’¥ä½¿ç”¨æ•°æ®ç«¯ç‚¹è·¯å¾„
    timeout: 30
    retry_attempts: 3

# æ•°æ®å­˜å‚¨é…ç½®
storage:
  claude_accounts_file: "claude_accounts.json"  # Claudeè´¦æˆ·æ•°æ®æ–‡ä»¶
  api_usage_file: "api_keys_usage.json"        # APIä½¿ç”¨æƒ…å†µæ•°æ®æ–‡ä»¶
  data_directory: "data"                        # æ•°æ®ç›®å½•

# é€šçŸ¥ç³»ç»Ÿé…ç½®
notification:
  enabled: true                                # æ˜¯å¦å¯ç”¨é€šçŸ¥
  feishu:
    enabled: true                              # æ˜¯å¦å¯ç”¨é£ä¹¦é€šçŸ¥
    
    # é£ä¹¦æœºå™¨äººæ¨¡å¼é…ç½®ï¼ˆäºŒé€‰ä¸€ï¼‰ï¼š
    # 
    # ã€æ¨¡å¼1ï¼šWebhookæ¨¡å¼ã€‘- ç®€å•é…ç½®ï¼Œåªæ”¯æŒURLè·³è½¬æŒ‰é’®
    webhook_url: "https://open.feishu.cn/open-apis/bot/v2/hook/your_webhook_id"
    # 
    # ã€æ¨¡å¼2ï¼šåº”ç”¨æ¨¡å¼ã€‘- é«˜çº§åŠŸèƒ½ï¼Œæ”¯æŒå›è°ƒæŒ‰é’®ï¼ˆå–æ¶ˆä¸‹é¢æ³¨é‡Šä½¿ç”¨ï¼‰
    # app_id: "cli_your_app_id"                # é£ä¹¦åº”ç”¨ID
    # app_secret: "your_app_secret"            # é£ä¹¦åº”ç”¨Secret
    # chat_id: "oc_your_chat_id"               # ç›®æ ‡ç¾¤èŠIDï¼ˆå¯é€‰ï¼Œä¸å¡«åˆ™è‡ªåŠ¨è·å–ç¬¬ä¸€ä¸ªç¾¤èŠï¼‰
    # encrypt_key: "your_encrypt_key"          # é£ä¹¦åŠ å¯†å¯†é’¥ï¼ˆå¯é€‰ï¼Œç”¨äºChallengeéªŒè¯ï¼‰
    # verification_token: "your_verification_token"  # é£ä¹¦éªŒè¯Tokenï¼ˆå¯é€‰ï¼Œç”¨äºChallengeéªŒè¯ï¼‰
    # æ³¨æ„ï¼šå¦‚æœé…ç½®äº†app_idå’Œapp_secretï¼Œå°†ä¼˜å…ˆä½¿ç”¨åº”ç”¨æ¨¡å¼
    
    card_style: "rich"                         # å¡ç‰‡æ ·å¼ï¼šsimple/rich
    
    # é£ä¹¦å¡ç‰‡æŒ‰é’®é…ç½®
    buttons:
      # æŒ‰é’®åŠ¨ä½œç±»å‹ï¼šurl(è·³è½¬) | callback(å›è°ƒ)
      # æ³¨æ„ï¼šcallbackæ¨¡å¼ä»…åœ¨ä½¿ç”¨app_id/app_secretæ—¶å¯ç”¨
      action_type: "url"                       # é»˜è®¤ä½¿ç”¨URLè·³è½¬
      
      # å¡ç‰‡æŒ‰é’®URLåŸºç¡€åœ°å€ï¼ˆå¯èƒ½ä¸æœåŠ¡å™¨host:portä¸åŒï¼‰
      base_url: "http://your-domain.com:8155"  # å¤–éƒ¨è®¿é—®åœ°å€ï¼Œå¦‚æœä¸ºç©ºåˆ™ä½¿ç”¨serverçš„host:port
      
      # URLè·³è½¬æ¨¡å¼é…ç½®ï¼ˆå½“action_typeä¸º"url"æ—¶ç”Ÿæ•ˆï¼‰
      url_actions:
        - text: "ç›‘æ§è´¦æˆ·çŠ¶æ€"                  # æŒ‰é’®æ˜¾ç¤ºæ–‡æœ¬
          command: "monitor_accounts"           # å¯¹åº”çš„APIå‘½ä»¤
          style: "default"                     # æŒ‰é’®æ ·å¼ï¼šdefault/primary/danger
        - text: "ç›‘æ§APIä½¿ç”¨æƒ…å†µ"
          command: "monitor_api_usage"
          style: "default"
        - text: "å®Œæ•´ç›‘æ§"
          command: "full_monitor" 
          style: "primary"
      
      # å›è°ƒæ¨¡å¼é…ç½®ï¼ˆå½“action_typeä¸º"callback"æ—¶ç”Ÿæ•ˆï¼Œä»…é™åº”ç”¨æ¨¡å¼ï¼‰  
      callback_actions:
        - text: "ç›‘æ§è´¦æˆ·çŠ¶æ€"                  # æŒ‰é’®æ˜¾ç¤ºæ–‡æœ¬
          value: "monitor_accounts"             # å›è°ƒå€¼
          style: "default"                     # æŒ‰é’®æ ·å¼
        - text: "ç›‘æ§APIä½¿ç”¨æƒ…å†µ"
          value: "monitor_api_usage"
          style: "default"
        - text: "å®Œæ•´ç›‘æ§"
          value: "full_monitor"
          style: "primary"

# FastAPIæœåŠ¡å™¨é…ç½®
server:
  host: "localhost"                            # æœåŠ¡å™¨åœ°å€
  port: 8155                                   # æœåŠ¡å™¨ç«¯å£
  
  # è®¤è¯é…ç½®
  auth:
    # api_key: "your_fastapi_access_key_here"    # APIè®¿é—®å¯†é’¥
    # api_secret: "your_fastapi_secret_key_here" # APIå¯†é’¥ç­¾å
    # require_signature: false                   # æ˜¯å¦éœ€è¦HMACç­¾åéªŒè¯
    simple_key: "your_simple_key_here"         # ç®€å•URLå‚æ•°éªŒè¯å¯†é’¥
  
  # æœåŠ¡å™¨è¿è¡Œé…ç½®
  workers: 1                                   # å·¥ä½œè¿›ç¨‹æ•°
  reload: false                                # å¼€å‘æ¨¡å¼çƒ­é‡è½½
  log_level: "info"                            # æ—¥å¿—çº§åˆ«

# ç³»ç»Ÿé…ç½®
system:
  timezone: "Asia/Shanghai"                    # æ—¶åŒºè®¾ç½®
  log_level: "INFO"                           # ç³»ç»Ÿæ—¥å¿—çº§åˆ«
  encoding: "utf-8"                           # æ–‡ä»¶ç¼–ç 

# ç›‘æ§é…ç½®
monitoring:
  check_interval: 300                         # æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰
  rate_limit_threshold: 10                    # é™æµé˜ˆå€¼ï¼ˆåˆ†é’Ÿï¼‰
  notification_cooldown: 300                  # é€šçŸ¥å†·å´æ—¶é—´ï¼ˆç§’ï¼‰

# =====================================
# é£ä¹¦æœºå™¨äººé…ç½®ç¤ºä¾‹
# =====================================
# 
# ã€ç¤ºä¾‹1ï¼šWebhookæ¨¡å¼é…ç½®ã€‘
# notification:
#   feishu:
#     enabled: true
#     webhook_url: "https://open.feishu.cn/open-apis/bot/v2/hook/your_webhook_id"
#     buttons:
#       action_type: "url"
#       url_actions:
#         - text: "ğŸ” ç›‘æ§è´¦æˆ·çŠ¶æ€"
#           command: "monitor_accounts"
#           style: "default"
#         - text: "ğŸ“Š ç›‘æ§APIä½¿ç”¨æƒ…å†µ"
#           command: "monitor_api_usage"
#           style: "default"
#         - text: "ğŸš€ å®Œæ•´ç›‘æ§"
#           command: "full_monitor"
#           style: "primary"
# 
# ã€ç¤ºä¾‹2ï¼šåº”ç”¨æ¨¡å¼é…ç½®ï¼ˆæ”¯æŒå›è°ƒï¼‰ã€‘
# notification:
#   feishu:
#     enabled: true
#     app_id: "cli_your_app_id"
#     app_secret: "your_app_secret"
#     chat_id: "oc_your_chat_id"               # å¯é€‰ï¼šæŒ‡å®šç¾¤èŠIDï¼Œä¸å¡«åˆ™è‡ªåŠ¨è·å–ç¬¬ä¸€ä¸ªç¾¤èŠ
#     encrypt_key: "your_encrypt_key"          # å¯é€‰ï¼šé£ä¹¦åŠ å¯†å¯†é’¥ï¼Œç”¨äºChallengeéªŒè¯
#     verification_token: "your_verification_token"  # å¯é€‰ï¼šé£ä¹¦éªŒè¯Tokenï¼Œç”¨äºChallengeéªŒè¯
#     buttons:
#       action_type: "callback"
#       callback_actions:
#         - text: "ğŸ” ç›‘æ§è´¦æˆ·çŠ¶æ€"
#           value: "monitor_accounts"
#           style: "default"
#         - text: "ğŸ“Š ç›‘æ§APIä½¿ç”¨æƒ…å†µ"
#           value: "monitor_api_usage"
#           style: "default"
#         - text: "ğŸš€ å®Œæ•´ç›‘æ§"
#           value: "full_monitor"
#           style: "primary"
#
# =====================================
# é£ä¹¦ Challenge éªŒè¯è¯´æ˜
# =====================================
#
# é£ä¹¦å¼€æ”¾å¹³å°ä¸ºäº†éªŒè¯å›è°ƒURLçš„æœ‰æ•ˆæ€§ï¼Œä¼šå‘é€ChallengeéªŒè¯è¯·æ±‚ã€‚
# ç³»ç»Ÿæ”¯æŒä¸¤ç§éªŒè¯æ¨¡å¼ï¼š
#
# 1. æ˜æ–‡æ¨¡å¼ï¼ˆæœªé…ç½®encrypt_keyï¼‰ï¼š
#    é£ä¹¦ç›´æ¥å‘é€åŒ…å«challengeå­—æ®µçš„JSONè¯·æ±‚
#    ç³»ç»Ÿç›´æ¥è§£æå¹¶è¿”å›challengeå€¼
#
# 2. åŠ å¯†æ¨¡å¼ï¼ˆå·²é…ç½®encrypt_keyï¼‰ï¼š
#    é£ä¹¦å‘é€åŠ å¯†çš„challengeè¯·æ±‚
#    ç³»ç»Ÿä½¿ç”¨encrypt_keyè§£å¯†åè¿”å›challengeå€¼
#
# é…ç½®è¯´æ˜ï¼š
# - encrypt_key: åœ¨é£ä¹¦å¼€æ”¾å¹³å°åº”ç”¨è®¾ç½®ä¸­é…ç½®çš„Encrypt Key
# - verification_token: åœ¨é£ä¹¦å¼€æ”¾å¹³å°åº”ç”¨è®¾ç½®ä¸­é…ç½®çš„Verification Token
# - ä¸¤è€…éƒ½æ˜¯å¯é€‰é…ç½®ï¼Œä½†æ¨èé…ç½®ä»¥æé«˜å®‰å…¨æ€§